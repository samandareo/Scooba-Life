<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scooba Life</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/media.css">
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"> 
</head>
<body>
    <div class="signup">
        <div class="local-navbar">
            <div class="first-section">
                <div class="logo">
                    <img src="./images/logo.png" alt="">
                </div> 
                
                <div class="search-section">
                    <i class="bi bi-search"></i>
                </div>
            </div>

            <div class="second-section" id="second-section">
                <div class="menu-section">
                <a href="./index.html">Home</a>
                <a href="./index.html#services">Services</a>
                <a href="#courses">Courses</a>
                <a href="#about">About</a>
                <a href="#contact">Contact</a>
                </div>

                <div class="add-section">
                    <div class="line-menu"></div>
                    <div>
                        <a href="https://scuba-life.netlify.app/signin.html"><i class="bi bi-person"></i></a>
                    </div>
                    
                    <div class="drop-elements">
                        <button type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" data-bs-display="static" aria-expanded="false"><i class="bi bi-chevron-down"></i></button>
                        <ul class="dropdown-menu text-center dropdown-menu-end m-auto">
                            <li class="dropdown-center">
                                <button class="dropdown-toggle nav-text-color" type="button" data-bs-toggle="dropdown" aria-expanded="false" >ACCESSIBILITIES</button>
                                    <ul class="dropdown-menu ">
                                        <li><a class="dropdown-item nav-text-color" href="#"><i class="bi bi-file-font"></i>Change font size</a></li>
                                        <li><a class="dropdown-item nav-text-color" href="#"><i class="bi bi-mic-fill"></i>Voice function</a></li>
                                        <li><a class="dropdown-item nav-text-color" href="#"><i class="bi bi-volume-up-fill"></i>Read loudly</a></li>
                                    </ul>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li class="dropdown-center">
                                <button class="dropdown-toggle nav-text-color" type="button" data-bs-toggle="dropdown" aria-expanded="false" >LANGUAGES</button>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item nav-text-color" href="#">English</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">Russian</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">Spanish</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">Duetsch</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">한국인</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">Nederlands</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">Italiano</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">عربي</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">Indonesia</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item nav-text-color" href="#">Português</a></li>
                                    </ul>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
            <div class="hamburger-menu">
                <button type="button" onclick="changeStyleOfham()" id="hamburger-button"><i class="bi bi-list"></i></button>         
            </div>


        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 offset-lg-2">
                    <div class="sign-up mb-5">
                        <h2 class="mt-1">SIGN IN</h2>
                        <hr>

                        <div class="row">
                            <div class="col main-signup">
                                <h4>Don't have an account? <a href="https://scuba-life.netlify.app/signup.html" style="text-decoration: none;">Create an account</a></h4>
                                <div class="login-line">
                                    <input type="text" placeholder="Email" id="sign-email" style="height: 40px;">
                                    <input type="password" placeholder="Password" id="sign-pass" style="height: 40px;">
                                </div>
                                <div class="fourth-sign-line">
                                    <div class="verify-human">
                                        <input type="checkbox">
                                        <h6>I'm not robot</h6>
                                        <i class="bi bi-robot"></i>
                                    </div>
                                    <div class="signup-submit mt-2">
                                        <button id="signData">SIGN IN</button>
                                    </div>
                                   
                                    <button type="button" style="border:none; background: none; color: blue;" data-bs-toggle="modal" data-bs-target="#forgotPassModal">Forgot password?</button>

                                      <!-- Modal -->
                                      <div class="modal fade" id="forgotPassModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                          <div class="modal-content">
                                            <div class="modal-header">
                                              <h5 class="modal-title" id="staticBackdropLabel">Reset password</h5>
                                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="mb-3">
                                                    <label for="Reset email" class="form-label">Email address</label>
                                                    <input type="email" class="form-control" id="resetEmail" placeholder="name@example.com">
                                                    
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                              <button type="submit" class="btn btn-primary" id="resetPass">Reset</button>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
  

                                    <h6 class="mt-1">OR</h6>
                                    <div class="goog-app">
                                        <button id="signGoogle"><i class="bi bi-google"></i> GOOGLE</button>
                                        <button id="signApple" onclick="viewMsg()"><i class="bi bi-apple"></i> APPLE ID</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>    
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="container-fluid">
            <div class="row first-style-footer">
                <div class="col">
                    <ul>
                        <li><a href="">Get consultation</a></li>
                        <li><a href="#cources">Buy courses</a></li>
                        <li><a href="#advices">Get information about diving</a></li>
                        <li><a href="">Our experience</a></li>
                    </ul>
                </div>
                <div class="col mid-footer">
                    <ul>
                        <li><a href="">Inside Scooba</a></li>
                        <li><a href="#about">Who we are</a></li>
                        <li><a href="">Corporate responsibility</a></li>
                        <li><a href="">Working at Scooba Life</a></li>
                    </ul>
                </div>
                <div class="col mid-footer">
                    <ul>
                        <li><a href="#about">Company information</a></li>
                        <li><a href="#about">About company</a></li>
                        <li><a href="#services">Company services</a></li>
                        <li><a href="#advices">Company advices</a></li>
                    </ul>
                </div>
                <div class="col">
                    <div class="email-updates">
                    <h3>Email Updates</h3>
                    <p>Get 10% off eLearning online! Sign up and get the latest updates, offers and more.</p>
                    <a href="https://scuba-life/signup.html">SIGN UP (AND SAVE!)</a>
                    </div>
                    <div class="social-medias">
                        <a href="https://instagram.com/"><i class="bi bi-instagram"></i></a>
                        <a href="https://twitter.com/"><i class="bi bi-twitter"></i></a>
                        <a href="https://facebook.com/"><i class="bi bi-facebook"></i></a>
                        <a href="https://youtube.com/"><i class="bi bi-youtube"></i></a>
                        <a href="https://tiktok.com/"><i class="bi bi-tiktok"></i></a>
                    </div>
                    
                </div>
            </div>
            <div class="row">
                <div class="col mt-4">
                    <a href="#">© Scooba Life 2023</a>
                    <a href="">Privacy Policy</a>
                    <a href="">Accessibilty</a>
                    <a href="">Copyright</a>
                    <a href="">Forms Center</a>
                    <a href="#contact">Contact</a>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="./js/index.js"></script>
<script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.js"></script>
<script src="./bootstrap/js/bootstrap.min.js"></script>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword,signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider,sendPasswordResetEmail  } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";
    import { getDatabase,update, ref } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";



    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCaoAXRdqf7rz2cpUZEr6xOKDrLRhZqTpk",
      authDomain: "scooba-c4ad3.firebaseapp.com",
      projectId: "scooba-c4ad3",
      databaseURL: "https://scooba-c4ad3-default-rtdb.firebaseio.com",
      storageBucket: "scooba-c4ad3.appspot.com",
      messagingSenderId: "1088136109045",
      appId: "1:1088136109045:web:96b0ce26b9262a2b42debc",
      measurementId: "G-JBCSESJ59D"
    };
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const database = getDatabase();
    const provider = new GoogleAuthProvider();

    signData.addEventListener('click', (e) =>{

        var email = document.getElementById('sign-email').value;
        var password = document.getElementById('sign-pass').value;

        signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                // Signed in 
                const user = userCredential.user;

                var lgDate = new Date();
                update(ref(database, 'users/' + user.uid), {
                    last_login: lgDate
                }).then(() => {
                    alert("You logged in successfully!");
                    })
                    .catch((error) => {
                    alert(error);
                    }); 
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                alert(errorMessage);
        });
    });
    signGoogle.addEventListener('click', (a)=> {
        signInWithPopup(auth, provider)
            .then((result) => {
                // This gives you a Google Access Token. You can use it to access the Google API.
                const credential = GoogleAuthProvider.credentialFromResult(result);
                const token = credential.accessToken;
                // The signed-in user info.
                const user = result.user;
                // IdP data available using getAdditionalUserInfo(result)
                var lgDate = new Date();
                update(ref(database, 'users/' + user.uid), {
                    last_login: lgDate
                }).then(() => {
                    alert("You logged in successfully!");
                    })
                    .catch((error) => {
                    alert(error);
                    }); 
            }).catch((error) => {
                // Handle Errors here.
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.customData.email;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);
                // ...
                alert(errorMessage);
            });
    });

    resetPass.addEventListener('click', (b)=> {
        var email = document.getElementById("resetEmail").value;
        sendPasswordResetEmail(auth, email)
        .then(() => {
            alert("The recovery password has been sent to your email!");
            window.location.href = "https://scuba-life.netlify.app/signin.html";
        })
        .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
           alert(errorMessage);
        });
    })
    const analytics = getAnalytics(app);
    </script>
</html>